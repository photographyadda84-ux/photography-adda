services:
  - type: web
    name: photography-adda-api
    env: docker
    plan: starter
    repo: https://github.com/YOUR_GITHUB_USERNAME/photography-adda
    branch: main
    dockerfilePath: api/Dockerfile
    buildCommand: ""
    startCommand: "node src/index.js"
    envVars:
      - key: UPLOAD_BUCKET
        value: photos-upload-dev
      - key: AWS_REGION
        value: ap-south-1
      - key: DATABASE_URL
        fromDatabase:
          name: photography-adda-db
          property: connectionString

  - type: worker
    name: photography-adda-worker
    env: docker
    plan: starter
    repo: https://github.com/YOUR_GITHUB_USERNAME/photography-adda
    branch: main
    dockerfilePath: worker-ai/Dockerfile
    startCommand: "python src/worker.py"
    envVars:
      - key: SQS_URL
        value: ""
      - key: UPLOAD_BUCKET
        value: photos-upload-dev
      - key: PROCESSED_BUCKET
        value: photos-processed-dev
      - key: AWS_REGION
        value: ap-south-1

  - type: web
    name: photography-adda-album
    env: docker
    plan: starter
    repo: https://github.com/YOUR_GITHUB_USERNAME/photography-adda
    branch: main
    dockerfilePath: album-engine/Dockerfile
    startCommand: "node src/index.js"
    envVars:
      - key: API_URL
        value: "https://photography-adda-api.onrender.com"

databases:
  - name: photography-adda-db
    engine: postgres
    plan: starter
    region: ap-south-1
    connection:
      database: photography_adda
      user: render_user

